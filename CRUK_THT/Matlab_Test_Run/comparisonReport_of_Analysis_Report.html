<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Analysis.m</title>
<style type="text/css">

pre {

  display:inline-block;

}

.diffnomatch {

  background: #e5d5e8;

     display: inline-block;

}

.right {

  background: #dbf2fc;

     display: inline-block;

}

.left {

  background: #f3e9d1;

     display: inline-block;

}

.diffsoft {

    color: #888;

}

.diffskip {

       color: #888;

  background: #e0e0e0;

     display: inline-block;

}

.bold {

  font-weight:bold;

}

</style>

<style type="text/css">
.headertable {
  width: min-content;
  overflow-wrap: anywhere;
}
</style>
</head><body><div id="allContent"><table cellpadding="0" cellspacing="0" border="0" class="headertable"><tr>
<td></td><td class="bold">Analysis.m</td>
<td></td><td class="bold">Analysis.m</td>
</tr>
<tr>
<td></td><td>C:\Users\THT_CRUK\Documents\MATLAB\Test_Run\fullspectral_8bands\Analysis.m</td>
<td></td><td>C:\Users\THT_CRUK\Documents\MATLAB\Test_Data\fullspectral_512bands\Analysis.m</td>
</tr>
<tr>
<td><pre>    </pre></td>
<td><pre>                                                                                </pre></td>
<td><pre>   </pre></td>
<td><pre>                                                                                </pre></td>
</tr></table>
<div>80 differences found.</div><div id="diffstart">
<br/><pre><div id="ignorediv"><a id="ignorelink"></a></div>
<span class="nodiff" data-left-line="1" data-right-line="1">  1 %%test analysis script                                                           . %%test analysis script                                                           <span>  1</span></span>
<span class="nodiff" data-left-line="2" data-right-line="2">  2 %% SETUP PERAMITERS                                                              . %% SETUP PERAMITERS                                                              <span>  2</span></span>
<span class="nodiff" data-left-line="3" data-right-line="3">  3 % number of folders by name, before data starts, remember "." and ".."           . % number of folders by name, before data starts, remember "." and ".."           <span>  3</span></span>
<span class="nodiff" data-left-line="4" data-right-line="4">  4 % this is for folders within the "HistMode_no_pixel_binning" folder              . % this is for folders within the "HistMode_no_pixel_binning" folder              <span>  4</span></span>
<span class="nodiff" data-left-line="5" data-right-line="5">  5 % the folder selected in the popup should be one level above this folder.        . % the folder selected in the popup should be one level above this folder.        <span>  5</span></span>
<span class="diffLine" data-left-line="6" data-right-line="6">  6 <span class="diffnomatch">numberofNondataFolders = <span style="background: #be96c6;">3</span>;                                                      x numberofNondataFolders = <span style="background: #be96c6;">2</span>;                                                     </span> <span>  6</span></span>
<span class="nodiff" data-left-line="7" data-right-line="7">  7                                                                                  .                                                                                  <span>  7</span></span>
<span class="nodiff" data-left-line="8" data-right-line="8">  8 %setnumberofrows/colums - to match data as recorded, this will effect the        . %setnumberofrows/colums - to match data as recorded, this will effect the        <span>  8</span></span>
<span class="nodiff" data-left-line="9" data-right-line="9">  9 %number of files read in and the naming of output files                          . %number of files read in and the naming of output files                          <span>  9</span></span>
<span class="diffLine" data-left-line="10" data-right-line="10"> 10 <span class="diffnomatch">numberofRows = <span style="background: #be96c6;">4</span>; %this is the number of rows OR just change to the number of sa x numberofRows = <span style="background: #be96c6;">8</span>; %this is the number of rows OR just change to the number of sa</span> <span> 10</span></span>
<span class="diffLine" data-left-line="11" data-right-line="11"> 11 <span class="diffnomatch">numberofColums = <span style="background: #be96c6;">4</span>;                                                              x numberofColums = <span style="background: #be96c6;">1</span>;                                                             </span> <span> 11</span></span>
<span class="diffLine" data-left-line="12" data-right-line="0"> 12 <span class="diffnew left">                                                                                 &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="diffLine" data-left-line="13" data-right-line="0"> 13 <span class="diffnew left">n_bins = 16;                                                                     &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="diffLine" data-left-line="14" data-right-line="0"> 14 <span class="diffnew left">n_spectrum = 8;                                                                  &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="diffLine" data-left-line="15" data-right-line="0"> 15 <span class="diffnew left">frame_size = 512;                                                                &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="nodiff" data-left-line="16" data-right-line="12"> 16                                                                                  .                                                                                  <span> 12</span></span>
<span class="nodiff" data-left-line="17" data-right-line="13"> 17                                                                                  .                                                                                  <span> 13</span></span>
<span class="nodiff" data-left-line="18" data-right-line="14"> 18 %Set name for output toplevel folder where data is saved                         . %Set name for output toplevel folder where data is saved                         <span> 14</span></span>
<span class="nodiff" data-left-line="19" data-right-line="15"> 19                                                                                  .                                                                                  <span> 15</span></span>
<span class="diffLine" data-left-line="20" data-right-line="16"> 20 <span class="diffnomatch">analysisType = '<span style="background: #be96c6;">/</span><span style="background: #be96c6;">20221202_PutSessionNameHere</span>'; % CHANGE THIS FOR EACH DIFFERENT  x analysisType = '<span style="background: #be96c6;">\</span><span style="background: #be96c6;">SF161020</span>'; % CHANGE THIS FOR EACH DIFFERENT ANALYSIS           </span> <span> 16</span></span>
<span class="nodiff" data-left-line="21" data-right-line="17"> 21                                                                                  .                                                                                  <span> 17</span></span>
<span class="nodiff" data-left-line="22" data-right-line="18"> 22 AlphaMask = 1; % set to 0 to plot with no Aplha masking applied - TO BE IMPLEMEN . AlphaMask = 1; % set to 0 to plot with no Aplha masking applied - TO BE IMPLEMEN <span> 18</span></span>
<span class="nodiff" data-left-line="23" data-right-line="19"> 23 AlphaScalefactor = 2.5; % Scaling factor for alpha mask (contrast level)         . AlphaScalefactor = 2.5; % Scaling factor for alpha mask (contrast level)         <span> 19</span></span>
                                                                        <span class="diffskip">[6 unmodified lines hidden]</span>
<span class="nodiff" data-left-line="30" data-right-line="26"> 30 %set the wavelength range to look over (need to convet drom wavelength 1 =       . %set the wavelength range to look over (need to convet drom wavelength 1 =       <span> 26</span></span>
<span class="nodiff" data-left-line="31" data-right-line="27"> 31 %500 nm, 512 = 780 nm)                                                           . %500 nm, 512 = 780 nm)                                                           <span> 27</span></span>
<span class="nodiff" data-left-line="32" data-right-line="28"> 32 firstSensorPixel = 1;                                                            . firstSensorPixel = 1;                                                            <span> 28</span></span>
<span class="diffLine" data-left-line="33" data-right-line="29"> 33 <span class="diffnomatch">lastSensorPixel = <span style="background: #be96c6;">8</span>;                                                             x lastSensorPixel = <span style="background: #be96c6;">410</span>;                                                          </span> <span> 29</span></span>
<span class="diffLine" data-left-line="34" data-right-line="30"> 34 <span class="diffnomatch">numberOfwavelengthstoPlot = <span style="background: #be96c6;">8</span>; % number of wavelengths to fit beteen 500 and 720 x numberOfwavelengthstoPlot = <span style="background: #be96c6;">6</span>; % number of wavelengths to fit beteen 500 and 720</span> <span> 30</span></span>
<span class="nodiff" data-left-line="35" data-right-line="31"> 35                                                                                  .                                                                                  <span> 31</span></span>
<span class="nodiff" data-left-line="36" data-right-line="32"> 36 % set number of spectral pixels for moving sum, increase if mean Tau data noisy  . % set number of spectral pixels for moving sum, increase if mean Tau data noisy  <span> 32</span></span>
<span class="nodiff" data-left-line="37" data-right-line="33"> 37 spectral_pixel_span = 64;                                                        . spectral_pixel_span = 64;                                                        <span> 33</span></span>
                                                                       <span class="diffskip">[30 unmodified lines hidden]</span>
<span class="nodiff" data-left-line="68" data-right-line="64"> 68 lifetimeHigh = 2.5; % for stained, 1.7,  2.8 for unstained/fresh, MHorrricks 2   . lifetimeHigh = 2.5; % for stained, 1.7,  2.8 for unstained/fresh, MHorrricks 2   <span> 64</span></span>
<span class="nodiff" data-left-line="69" data-right-line="65"> 69                                                                                  .                                                                                  <span> 65</span></span>
<span class="nodiff" data-left-line="70" data-right-line="66"> 70                                                                                  .                                                                                  <span> 66</span></span>
<span class="diffLine" data-left-line="71" data-right-line="67"> 71 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;"> </span>% Load file path and find number of folders - 1 level deap to workspaces!!     x % Load file path and find number of folders - 1 level deap to workspaces!!      </span> <span> 67</span></span>
<span class="nodiff" data-left-line="72" data-right-line="68"> 72 currentFolder = pwd;                                                             . currentFolder = pwd;                                                             <span> 68</span></span>
<span class="diffLine" data-left-line="73" data-right-line="0"> 73 <span class="diffnew left">% % currentFolder = 'C:\Users\THT_CRUK\Documents\MATLAB\Test_Output';            &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="nodiff" data-left-line="74" data-right-line="69"> 74 filePath = uigetdir;                                                             . filePath = uigetdir;                                                             <span> 69</span></span>
<span class="nodiff" data-left-line="75" data-right-line="70"> 75                                                                                  .                                                                                  <span> 70</span></span>
<span class="diffLine" data-left-line="76" data-right-line="71"> 76 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;"> </span>newFolderIntesnity = [filePath, analysisType, '<span style="background: #be96c6;">/</span>Intensity'];                   x newFolderIntesnity = [filePath, analysisType, '<span style="background: #be96c6;">\</span>Intensity'];                    </span> <span> 71</span></span>
<span class="diffLine" data-left-line="77" data-right-line="72"> 77 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;"> </span>mkdir(newFolderIntesnity);                                                     x mkdir(newFolderIntesnity);                                                      </span> <span> 72</span></span>
<span class="diffLine" data-left-line="78" data-right-line="73"> 78 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;"> </span>newFolderIntesnityNormalised = [filePath, analysisType, '<span style="background: #be96c6;">/</span>Intensity<span style="background: #be96c6;">/</span>Normalised x newFolderIntesnityNormalised = [filePath, analysisType, '<span style="background: #be96c6;">\</span>Intensity<span style="background: #be96c6;">\</span>Normalised']</span> <span> 73</span></span>
<span class="diffLine" data-left-line="79" data-right-line="74"> 79 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;"> </span>mkdir(newFolderIntesnityNormalised);                                           x mkdir(newFolderIntesnityNormalised);                                            </span> <span> 74</span></span>
<span class="diffLine" data-left-line="80" data-right-line="75"> 80 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;"> </span>newFolderHistograms = [filePath, analysisType, '<span style="background: #be96c6;">/</span>Histograms'];                 x newFolderHistograms = [filePath, analysisType, '<span style="background: #be96c6;">\</span>Histograms'];                  </span> <span> 75</span></span>
<span class="diffLine" data-left-line="81" data-right-line="76"> 81 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;"> </span>mkdir(newFolderHistograms);                                                    x mkdir(newFolderHistograms);                                                     </span> <span> 76</span></span>
<span class="diffLine" data-left-line="82" data-right-line="77"> 82 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;"> </span>newFolderMeanTau = [filePath, analysisType, '<span style="background: #be96c6;">/</span>Histograms<span style="background: #be96c6;">/</span>meanTau'];            x newFolderMeanTau = [filePath, analysisType, '<span style="background: #be96c6;">\</span>Histograms<span style="background: #be96c6;">\</span>meanTau'];             </span> <span> 77</span></span>
<span class="diffLine" data-left-line="83" data-right-line="78"> 83 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;"> </span>mkdir(newFolderMeanTau);                                                       x mkdir(newFolderMeanTau);                                                        </span> <span> 78</span></span>
<span class="diffLine" data-left-line="84" data-right-line="79"> 84 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;"> </span>newFolderLifetimeData = [filePath, analysisType, '<span style="background: #be96c6;">/</span>Lifetime_Data'];            x newFolderLifetimeData = [filePath, analysisType, '<span style="background: #be96c6;">\</span>Lifetime_Data'];             </span> <span> 79</span></span>
<span class="diffLine" data-left-line="85" data-right-line="80"> 85 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;"> </span>mkdir(newFolderLifetimeData);                                                  x mkdir(newFolderLifetimeData);                                                   </span> <span> 80</span></span>
<span class="nodiff" data-left-line="86" data-right-line="81"> 86                                                                                  .                                                                                  <span> 81</span></span>
<span class="nodiff" data-left-line="87" data-right-line="82"> 87 pixeldivider = round((lastSensorPixel-firstSensorPixel)/numberOfwavelengthstoPlo . pixeldivider = round((lastSensorPixel-firstSensorPixel)/numberOfwavelengthstoPlo <span> 82</span></span>
<span class="nodiff" data-left-line="88" data-right-line="83"> 88 lastSensorPixel = pixeldivider*numberOfwavelengthstoPlot;                        . lastSensorPixel = pixeldivider*numberOfwavelengthstoPlot;                        <span> 83</span></span>
<span class="nodiff" data-left-line="89" data-right-line="84"> 89                                                                                  .                                                                                  <span> 84</span></span>
<span class="nodiff" data-left-line="90" data-right-line="85"> 90                                                                                  .                                                                                  <span> 85</span></span>
<span class="diffLine" data-left-line="91" data-right-line="86"> 91 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;"> </span>Wavelength = 0;                                                                x Wavelength = 0;                                                                 </span> <span> 86</span></span>
<span class="diffLine" data-left-line="92" data-right-line="87"> 92 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;"> </span>for i = firstSensorPixel:pixeldivider:lastSensorPixel                          x for i = firstSensorPixel:pixeldivider:lastSensorPixel                           </span> <span> 87</span></span>
<span class="diffLine" data-left-line="93" data-right-line="88"> 93 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">     </span>Wavelength = Wavelength +1;                                                x <span style="background: #be96c6;">    </span>Wavelength = Wavelength +1;                                                 </span> <span> 88</span></span>
<span class="diffLine" data-left-line="94" data-right-line="89"> 94 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">     </span>Wave  = round(i*<span style="background: #be96c6;">(</span><span style="background: #be96c6;">600</span><span style="background: #be96c6;">-</span><span style="background: #be96c6;">470</span><span style="background: #be96c6;">)</span><span style="background: #be96c6;">/</span><span style="background: #be96c6;">8</span>+ <span style="background: #be96c6;">470</span>);                                         x <span style="background: #be96c6;">    </span>Wave  = round(i*<span style="background: #be96c6;">0</span><span style="background: #be96c6;">.</span><span style="background: #be96c6;">5468</span><span style="background: #be96c6;"> </span>+ <span style="background: #be96c6;">500</span>);                                              </span> <span> 89</span></span>
<span class="diffLine" data-left-line="95" data-right-line="90"> 95 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">     </span>                                                                           x <span style="background: #be96c6;">    </span>                                                                            </span> <span> 90</span></span>
<span class="diffLine" data-left-line="96" data-right-line="91"> 96 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">     </span>if plotImages == 1                                                         x <span style="background: #be96c6;">    </span>if plotImages == 1                                                          </span> <span> 91</span></span>
<span class="diffLine" data-left-line="97" data-right-line="92"> 97 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">     </span>newFolderLifetimeImages = [filePath, analysisType,  '<span style="background: #be96c6;">/</span>Lifetime_', num2str( x <span style="background: #be96c6;">    </span>newFolderLifetimeImages = [filePath, analysisType,  '<span style="background: #be96c6;">\</span>Lifetime_', num2str(Wa</span> <span> 92</span></span>
<span class="diffLine" data-left-line="98" data-right-line="93"> 98 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">     </span>mkdir(newFolderLifetimeImages);                                            x <span style="background: #be96c6;">    </span>mkdir(newFolderLifetimeImages);                                             </span> <span> 93</span></span>
<span class="diffLine" data-left-line="99" data-right-line="94"> 99 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">     </span>                                                                           x <span style="background: #be96c6;">    </span>                                                                            </span> <span> 94</span></span>
<span class="diffLine" data-left-line="100" data-right-line="95">100 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">     </span>newFolderHistogramsData = [filePath, analysisType, '<span style="background: #be96c6;">/</span>Histograms<span style="background: #be96c6;">/</span>', num2str x <span style="background: #be96c6;">    </span>newFolderHistogramsData = [filePath, analysisType, '<span style="background: #be96c6;">\</span>Histograms<span style="background: #be96c6;">\</span>', num2str(W</span> <span> 95</span></span>
<span class="diffLine" data-left-line="101" data-right-line="96">101 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">     </span>mkdir(newFolderHistogramsData);                                            x <span style="background: #be96c6;">    </span>mkdir(newFolderHistogramsData);                                             </span> <span> 96</span></span>
<span class="diffLine" data-left-line="102" data-right-line="97">102 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">     </span>end                                                                        x <span style="background: #be96c6;">    </span>end                                                                         </span> <span> 97</span></span>
<span class="diffLine" data-left-line="103" data-right-line="98">103 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">     </span>                                                                           x <span style="background: #be96c6;">    </span>                                                                            </span> <span> 98</span></span>
<span class="diffLine" data-left-line="104" data-right-line="99">104 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">     </span>if plotNormalisedImages == 1                                               x <span style="background: #be96c6;">    </span>if plotNormalisedImages == 1                                                </span> <span> 99</span></span>
<span class="diffLine" data-left-line="105" data-right-line="100">105 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">     </span>newFolderLifetimeImages = [filePath, analysisType,  '<span style="background: #be96c6;">/</span>LifetimeNormalised_' x <span style="background: #be96c6;">    </span>newFolderLifetimeImages = [filePath, analysisType,  '<span style="background: #be96c6;">\</span>LifetimeNormalised_', </span> <span>100</span></span>
<span class="diffLine" data-left-line="106" data-right-line="101">106 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">     </span>mkdir(newFolderLifetimeImages);                                            x <span style="background: #be96c6;">    </span>mkdir(newFolderLifetimeImages);                                             </span> <span>101</span></span>
<span class="diffLine" data-left-line="107" data-right-line="102">107 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">     </span>end                                                                        x <span style="background: #be96c6;">    </span>end                                                                         </span> <span>102</span></span>
<span class="diffLine" data-left-line="108" data-right-line="0">108 <span class="diffnew left">%                                                                                &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="diffLine" data-left-line="0" data-right-line="103"><span class="diffsoft">  -</span><span class="diffold">                                                                                 </span><span class="diffnew right"> &gt;                                                                                 </span> <span>103</span></span>
<span class="diffLine" data-left-line="0" data-right-line="104"><span class="diffsoft">  -</span><span class="diffold">                                                                                 </span><span class="diffnew right"> &gt;                                                                                 </span> <span>104</span></span>
<span class="diffLine" data-left-line="109" data-right-line="105">109 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;"> </span>end                                                                            x end                                                                             </span> <span>105</span></span>
<span class="diffLine" data-left-line="0" data-right-line="106"><span class="diffsoft">  -</span><span class="diffold">                                                                                 </span><span class="diffnew right"> &gt;                                                                                 </span> <span>106</span></span>
<span class="diffLine" data-left-line="0" data-right-line="107"><span class="diffsoft">  -</span><span class="diffold">                                                                                 </span><span class="diffnew right"> &gt; pause(0.1)                                                                      </span> <span>107</span></span>
<span class="nodiff" data-left-line="110" data-right-line="108">110                                                                                  .                                                                                  <span>108</span></span>
<span class="diffLine" data-left-line="111" data-right-line="0">111 <span class="diffnew left">% pause(0.1)                                                                     &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="diffLine" data-left-line="112" data-right-line="0">112 <span class="diffnew left">%                                                                                &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="diffLine" data-left-line="113" data-right-line="109">113 <span class="diffnomatch">all_files = dir([filePath, '<span style="background: #be96c6;">/</span><span style="background: #be96c6;">HistMode_full_8bands_pixel_binning_inFW</span><span style="background: #be96c6;">/</span>']);        x all_files = dir([filePath, '<span style="background: #be96c6;">\</span><span style="background: #be96c6;">HistMode_no_pixel_binning</span><span style="background: #be96c6;">\</span>']);                     </span> <span>109</span></span>
<span class="nodiff" data-left-line="114" data-right-line="110">114 all_files = struct2table(all_files);                                             . all_files = struct2table(all_files);                                             <span>110</span></span>
<span class="nodiff" data-left-line="115" data-right-line="111">115 all_files = sortrows(all_files, 'name');                                         . all_files = sortrows(all_files, 'name');                                         <span>111</span></span>
<span class="nodiff" data-left-line="116" data-right-line="112">116 all_files = table2struct(all_files);                                             . all_files = table2struct(all_files);                                             <span>112</span></span>
                                                                       <span class="diffskip">[23 unmodified lines hidden]</span>
<span class="nodiff" data-left-line="140" data-right-line="136">140         fileNumber = row+colum-1 + ((row-1)*(numberofColums-1))+numberofNondataF .         fileNumber = row+colum-1 + ((row-1)*(numberofColums-1))+numberofNondataF <span>136</span></span>
<span class="nodiff" data-left-line="141" data-right-line="137">141         imageNumber = row+colum-1 + ((row-1)*(numberofColums-1));                .         imageNumber = row+colum-1 + ((row-1)*(numberofColums-1));                <span>137</span></span>
<span class="nodiff" data-left-line="142" data-right-line="138">142         %move to and load worspace from 1st subfolder                            .         %move to and load worspace from 1st subfolder                            <span>138</span></span>
<span class="diffLine" data-left-line="143" data-right-line="139">143 <span class="diffnomatch">        currDir = [filePath,'<span style="background: #be96c6;">/</span><span style="background: #be96c6;">HistMode_full_8bands_pixel_binning_inFW</span><span style="background: #be96c6;">/</span>', all_fil x         currDir = [filePath,'<span style="background: #be96c6;">\</span><span style="background: #be96c6;">HistMode_no_pixel_binning</span><span style="background: #be96c6;">\</span>', all_files(fileNumber)</span> <span>139</span></span>
<span class="nodiff" data-left-line="144" data-right-line="140">144         cd(currDir)                                                              .         cd(currDir)                                                              <span>140</span></span>
<span class="nodiff" data-left-line="145" data-right-line="141">145         disp('Loading workspace for folder:')                                    .         disp('Loading workspace for folder:')                                    <span>141</span></span>
<span class="nodiff" data-left-line="146" data-right-line="142">146         disp(all_files(fileNumber).name)                                         .         disp(all_files(fileNumber).name)                                         <span>142</span></span>
                                                                        <span class="diffskip">[1 unmodified lines hidden]</span>
<span class="nodiff" data-left-line="148" data-right-line="144">148         %return to matlab scripts directory                                      .         %return to matlab scripts directory                                      <span>144</span></span>
<span class="nodiff" data-left-line="149" data-right-line="145">149         cd(currentFolder)                                                        .         cd(currentFolder)                                                        <span>145</span></span>
<span class="nodiff" data-left-line="150" data-right-line="146">150                                                                                  .                                                                                  <span>146</span></span>
<span class="diffLine" data-left-line="151" data-right-line="0">151 <span class="diffnew left">        bins_array_3 = permute(bins_array_3, [4 3 1 2]);                         &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="nodiff" data-left-line="152" data-right-line="147">152                                                                                  .                                                                                  <span>147</span></span>
<span class="nodiff" data-left-line="153" data-right-line="148">153         disp('Producing Intensity Image')                                        .         disp('Producing Intensity Image')                                        <span>148</span></span>
<span class="nodiff" data-left-line="154" data-right-line="149">154                                                                                  .                                                                                  <span>149</span></span>
<span class="nodiff" data-left-line="155" data-right-line="150">155         % Produce and save intensity images                                      .         % Produce and save intensity images                                      <span>150</span></span>
<span class="diffLine" data-left-line="156" data-right-line="151">156 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">         </span>[intensity_image] = Intensity_Image_Summation(bins_array_3, frame_size x <span style="background: #be96c6;">        </span>[intensity_image] = Intensity_Image_Summation(bins_array_3, frame_size_x</span> <span>151</span></span>
<span class="diffLine" data-left-line="157" data-right-line="0">157 <span class="diffnew left">        intensity_image = sum(sum(bins_array_3, 1), 2);                          &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="nodiff" data-left-line="158" data-right-line="152">158         climit = 'auto';                                                         .         climit = 'auto';                                                         <span>152</span></span>
<span class="diffLine" data-left-line="159" data-right-line="153">159 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">         </span>plotter(intensity_image, newFolderIntesnity, row, colum, climit)       x <span style="background: #be96c6;">        </span>plotter(intensity_image, newFolderIntesnity, row, colum, climit)        </span> <span>153</span></span>
<span class="nodiff" data-left-line="160" data-right-line="154">160                                                                                  .                                                                                  <span>154</span></span>
<span class="nodiff" data-left-line="161" data-right-line="155">161         allIntensityImages{row+colum-1 + ((row-1)*(numberofColums-1))} = intensi .         allIntensityImages{row+colum-1 + ((row-1)*(numberofColums-1))} = intensi <span>155</span></span>
<span class="nodiff" data-left-line="162" data-right-line="156">162                                                                                  .                                                                                  <span>156</span></span>
<span class="nodiff" data-left-line="163" data-right-line="157">163         %Calculate wavelength axis                                               .         %Calculate wavelength axis                                               <span>157</span></span>
<span class="diffLine" data-left-line="164" data-right-line="158">164 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">         </span>[wavelengths,wavenumbers] = Wavelength_Calculator();                   x <span style="background: #be96c6;">        </span>[wavelengths,wavenumbers] = Wavelength_Calculator();                    </span> <span>158</span></span>
<span class="nodiff" data-left-line="165" data-right-line="159">165                                                                                  .                                                                                  <span>159</span></span>
<span class="nodiff" data-left-line="166" data-right-line="160">166         disp('Performing Lifetime Calculations')                                 .         disp('Performing Lifetime Calculations')                                 <span>160</span></span>
<span class="nodiff" data-left-line="167" data-right-line="161">167         % do lifetime fit calculations                                           .         % do lifetime fit calculations                                           <span>161</span></span>
<span class="diffLine" data-left-line="168" data-right-line="162">168 <span class="diffnomatch">        [parameters_cpu, selected_data_for_subtraction, bins_array_movsum_select x         [parameters_cpu, selected_data_for_subtraction, bins_array_movsum_select</span> <span>162</span></span>
<span class="nodiff" data-left-line="169" data-right-line="163">169                                                                                  .                                                                                  <span>163</span></span>
<span class="nodiff" data-left-line="170" data-right-line="164">170         if plotImages == 1                                                       .         if plotImages == 1                                                       <span>164</span></span>
<span class="nodiff" data-left-line="171" data-right-line="165">171             disp('Producing Lifetime Images and Plots for wavelength:')          .             disp('Producing Lifetime Images and Plots for wavelength:')          <span>165</span></span>
                                                                       <span class="diffskip">[10 unmodified lines hidden]</span>
<span class="nodiff" data-left-line="182" data-right-line="176">182         parameters_cpu(2,:) = parameters_cpu(2,:).*mask;                         .         parameters_cpu(2,:) = parameters_cpu(2,:).*mask;                         <span>176</span></span>
<span class="nodiff" data-left-line="183" data-right-line="177">183         tauLeastSquaresCPU = parameters_cpu(2,:);                                .         tauLeastSquaresCPU = parameters_cpu(2,:);                                <span>177</span></span>
<span class="nodiff" data-left-line="184" data-right-line="178">184         tauLeastSquaresCPU(tauLeastSquaresCPU&gt;5)=0;                              .         tauLeastSquaresCPU(tauLeastSquaresCPU&gt;5)=0;                              <span>178</span></span>
<span class="diffLine" data-left-line="185" data-right-line="179">185 <span class="diffnomatch">        tauLeastSquaresReshaped = reshape(tauLeastSquaresCPU, [<span style="background: #be96c6;">n_spectrum</span> frame_ x         tauLeastSquaresReshaped = reshape(tauLeastSquaresCPU, [<span style="background: #be96c6;">512</span> frame_size_x </span> <span>179</span></span>
<span class="diffLine" data-left-line="186" data-right-line="180">186 <span class="diffnomatch">        AlphaDataAll = reshape(selected_data_for_subtractionPeakbin, [<span style="background: #be96c6;">n_spectrum</span> x         AlphaDataAll = reshape(selected_data_for_subtractionPeakbin, [<span style="background: #be96c6;">512</span> frame_</span> <span>180</span></span>
<span class="diffLine" data-left-line="0" data-right-line="181"><span class="diffsoft">  -</span><span class="diffold">                                                                                 </span><span class="diffnew right"> &gt;                                                                                 </span> <span>181</span></span>
<span class="diffLine" data-left-line="0" data-right-line="182"><span class="diffsoft">  -</span><span class="diffold">                                                                                 </span><span class="diffnew right"> &gt;                                                                                 </span> <span>182</span></span>
<span class="diffLine" data-left-line="0" data-right-line="183"><span class="diffsoft">  -</span><span class="diffold">                                                                                 </span><span class="diffnew right"> &gt;         wavelengthnumber = 0;                                                   </span> <span>183</span></span>
<span class="diffLine" data-left-line="0" data-right-line="184"><span class="diffsoft">  -</span><span class="diffold">                                                                                 </span><span class="diffnew right"> &gt;         for i = firstSensorPixel:pixeldivider:lastSensorPixel                   </span> <span>184</span></span>
<span class="diffLine" data-left-line="0" data-right-line="185"><span class="diffsoft">  -</span><span class="diffold">                                                                                 </span><span class="diffnew right"> &gt;                                                                                 </span> <span>185</span></span>
<span class="diffLine" data-left-line="187" data-right-line="186">187 <span class="diffnomatch"><span style="background: #be96c6;">        </span>                                                                         x <span style="background: #be96c6;">           </span>                                                                     </span> <span>186</span></span>
<span class="diffLine" data-left-line="0" data-right-line="187"><span class="diffsoft">  -</span><span class="diffold">                                                                                 </span><span class="diffnew right"> &gt;             wavelengthnumber = wavelengthnumber+1;                              </span> <span>187</span></span>
<span class="diffLine" data-left-line="0" data-right-line="188"><span class="diffsoft">  -</span><span class="diffold">                                                                                 </span><span class="diffnew right"> &gt;             spectral_pixel = i;                                                 </span> <span>188</span></span>
<span class="diffLine" data-left-line="188" data-right-line="189">188 <span class="diffnomatch"><span style="background: #be96c6;">        </span>                                                                         x <span style="background: #be96c6;">            </span>                                                                    </span> <span>189</span></span>
<span class="diffLine" data-left-line="189" data-right-line="0">189 <span class="diffnew left">%         wavelengthnumber = 0;                                                  &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="diffLine" data-left-line="190" data-right-line="0">190 <span class="diffnew left">%         for i = firstSensorPixel:pixeldivider:lastSensorPixel                  &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="diffLine" data-left-line="191" data-right-line="0">191 <span class="diffnew left">%                                                                                &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="diffLine" data-left-line="192" data-right-line="0">192 <span class="diffnew left">%                                                                                &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="diffLine" data-left-line="193" data-right-line="0">193 <span class="diffnew left">%             wavelengthnumber = wavelengthnumber+1;                             &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="diffLine" data-left-line="194" data-right-line="0">194 <span class="diffnew left">%             spectral_pixel = i;                                                &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="diffLine" data-left-line="195" data-right-line="0">195 <span class="diffnew left">%                                                                                &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="diffLine" data-left-line="196" data-right-line="190">196 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">             </span>if plotImages == 1                                                 x <span style="background: #be96c6;">            </span>if plotImages == 1                                                  </span> <span>190</span></span>
<span class="diffLine" data-left-line="197" data-right-line="191">197 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">             </span>Currentwavelength = i*0.5468 + 500;                                x <span style="background: #be96c6;">            </span>Currentwavelength = i*0.5468 + 500;                                 </span> <span>191</span></span>
<span class="diffLine" data-left-line="198" data-right-line="192">198 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">             </span>disp(Currentwavelength)                                            x <span style="background: #be96c6;">            </span>disp(Currentwavelength)                                             </span> <span>192</span></span>
<span class="diffLine" data-left-line="199" data-right-line="193">199 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;"> </span><span style="background: #be96c6;">%</span><span style="background: #be96c6;">             </span>Lifetime_Image_Creation(spectral_pixel, bin, mask_threshold, sam x <span style="background: #be96c6;">            </span>Lifetime_Image_Creation(spectral_pixel, bin, mask_threshold, sample,</span> <span>193</span></span>
<span class="diffLine" data-left-line="200" data-right-line="194">200 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">             </span>end                                                                x <span style="background: #be96c6;">            </span>end                                                                 </span> <span>194</span></span>
<span class="diffLine" data-left-line="201" data-right-line="195">201 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">                 </span>                                                               x <span style="background: #be96c6;">                </span>                                                                </span> <span>195</span></span>
<span class="diffLine" data-left-line="202" data-right-line="196">202 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">             </span>if plotImages == 0                                                 x <span style="background: #be96c6;">            </span>if plotImages == 0                                                  </span> <span>196</span></span>
<span class="diffLine" data-left-line="203" data-right-line="197">203 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">             </span>tauLeastSquaresReshapedDisplayFrame = reshape(tauLeastSquaresResha x <span style="background: #be96c6;">            </span>tauLeastSquaresReshapedDisplayFrame = reshape(tauLeastSquaresReshape</span> <span>197</span></span>
<span class="diffLine" data-left-line="204" data-right-line="198">204 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">             </span>array_movsum_selected = reshape(bins_array_movsum_selected_reshape x <span style="background: #be96c6;">            </span>array_movsum_selected = reshape(bins_array_movsum_selected_reshaped,</span> <span>198</span></span>
<span class="diffLine" data-left-line="205" data-right-line="199">205 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">             </span>bins_array_alpha = reshape(array_movsum_selected(spectral_pixel, b x <span style="background: #be96c6;">            </span>bins_array_alpha = reshape(array_movsum_selected(spectral_pixel, bin</span> <span>199</span></span>
<span class="diffLine" data-left-line="206" data-right-line="200">206 <span class="diffnomatch"><span style="background: #be96c6;">%</span><span style="background: #be96c6;">             </span>end                                                                x <span style="background: #be96c6;">            </span>end                                                                 </span> <span>200</span></span>
<span class="diffLine" data-left-line="207" data-right-line="0">207 <span class="diffnew left">%                                                                                &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="diffLine" data-left-line="208" data-right-line="0">208 <span class="diffnew left">%         end                                                                    &lt; </span><span class="diffold">                                                                                </span> <span class="diffsoft">  -</span></span>
<span class="nodiff" data-left-line="209" data-right-line="201">209                                                                                  .                                                                                  <span>201</span></span>
<span class="diffLine" data-left-line="0" data-right-line="202"><span class="diffsoft">  -</span><span class="diffold">                                                                                 </span><span class="diffnew right"> &gt;         end                                                                     </span> <span>202</span></span>
<span class="diffLine" data-left-line="210" data-right-line="203">210 <span class="diffnomatch"><span style="background: #be96c6;">        </span>lifetimeImageData{imageNumber} = tauLeastSquaresReshaped;                x <span style="background: #be96c6;">            </span>lifetimeImageData{imageNumber} = tauLeastSquaresReshaped;           </span> <span>203</span></span>
<span class="diffLine" data-left-line="211" data-right-line="204">211 <span class="diffnomatch"><span style="background: #be96c6;">        </span>lifetimeAlphaData{imageNumber} = AlphaDataAll;                           x <span style="background: #be96c6;">            </span>lifetimeAlphaData{imageNumber} = AlphaDataAll;                      </span> <span>204</span></span>
<span class="nodiff" data-left-line="212" data-right-line="205">212                                                                                  .                                                                                  <span>205</span></span>
<span class="nodiff" data-left-line="213" data-right-line="206">213     end                                                                          .     end                                                                          <span>206</span></span>
<span class="nodiff" data-left-line="214" data-right-line="207">214                                                                                  .                                                                                  <span>207</span></span>
                                                                       <span class="diffskip">[36 unmodified lines hidden]</span>
<span class="nodiff" data-left-line="251" data-right-line="244">251         end                                                                      .         end                                                                      <span>244</span></span>
<span class="nodiff" data-left-line="252" data-right-line="245">252     end                                                                          .     end                                                                          <span>245</span></span>
<span class="nodiff" data-left-line="253" data-right-line="246">253                                                                                  .                                                                                  <span>246</span></span>
<span class="diffLine" data-left-line="254" data-right-line="247">254 <span class="diffnomatch">    save([newFolderIntesnityNormalised,'<span style="background: #be96c6;">/</span>AllIntensityData.mat'],'allIntensityIma x     save([newFolderIntesnityNormalised,'<span style="background: #be96c6;">\</span>AllIntensityData.mat'],'allIntensityIma</span> <span>247</span></span>
<span class="diffLine" data-left-line="255" data-right-line="248">255 <span class="diffnomatch">    save([newFolderIntesnityNormalised,'<span style="background: #be96c6;">/</span>AllIntensityImagesNormalised.mat'],'All x     save([newFolderIntesnityNormalised,'<span style="background: #be96c6;">\</span>AllIntensityImagesNormalised.mat'],'All</span> <span>248</span></span>
<span class="nodiff" data-left-line="256" data-right-line="249">256     else                                                                         .     else                                                                         <span>249</span></span>
<span class="nodiff" data-left-line="257" data-right-line="250">257 end                                                                              . end                                                                              <span>250</span></span>
<span class="nodiff" data-left-line="258" data-right-line="251">258 %% Plot global normalized Alpha Lifetime plots, - can be run independently       . %% Plot global normalized Alpha Lifetime plots, - can be run independently       <span>251</span></span>
                                                                       <span class="diffskip">[40 unmodified lines hidden]</span>
<span class="nodiff" data-left-line="299" data-right-line="292">299                 if oneMinusAlpha == 1                                            .                 if oneMinusAlpha == 1                                            <span>292</span></span>
<span class="nodiff" data-left-line="300" data-right-line="293">300                 AlphaData = squeeze(AlphaData(a,:,:));                           .                 AlphaData = squeeze(AlphaData(a,:,:));                           <span>293</span></span>
<span class="nodiff" data-left-line="301" data-right-line="294">301                 AlphatoPlot = AlphaScalefactor*(1-(AlphaData/OverallNormalisedAl .                 AlphatoPlot = AlphaScalefactor*(1-(AlphaData/OverallNormalisedAl <span>294</span></span>
<span class="diffLine" data-left-line="302" data-right-line="295">302 <span class="diffnomatch">                folder = [filePath,analysisType, '<span style="background: #be96c6;">/</span>LifetimeNormalised_', num2str x                 folder = [filePath,analysisType, '<span style="background: #be96c6;">\</span>LifetimeNormalised_', num2str</span> <span>295</span></span>
<span class="nodiff" data-left-line="303" data-right-line="296">303                 lifetimeplotter(ImagetoPlot, folder, AlphatoPlot, lifetimeLow, l .                 lifetimeplotter(ImagetoPlot, folder, AlphatoPlot, lifetimeLow, l <span>296</span></span>
<span class="nodiff" data-left-line="304" data-right-line="297">304                 else                                                             .                 else                                                             <span>297</span></span>
<span class="nodiff" data-left-line="305" data-right-line="298">305                 AlphaData = squeeze(AlphaData(a,:,:));                           .                 AlphaData = squeeze(AlphaData(a,:,:));                           <span>298</span></span>
<span class="nodiff" data-left-line="306" data-right-line="299">306                 AlphatoPlot = AlphaScalefactor*squeeze(AlphaData)/OverallNormali .                 AlphatoPlot = AlphaScalefactor*squeeze(AlphaData)/OverallNormali <span>299</span></span>
<span class="diffLine" data-left-line="307" data-right-line="300">307 <span class="diffnomatch">                folder = [filePath,analysisType, '<span style="background: #be96c6;">/</span>LifetimeNormalised_', num2str x                 folder = [filePath,analysisType, '<span style="background: #be96c6;">\</span>LifetimeNormalised_', num2str</span> <span>300</span></span>
<span class="nodiff" data-left-line="308" data-right-line="301">308                 lifetimeplotter(ImagetoPlot, folder, AlphatoPlot, lifetimeLow, l .                 lifetimeplotter(ImagetoPlot, folder, AlphatoPlot, lifetimeLow, l <span>301</span></span>
<span class="nodiff" data-left-line="309" data-right-line="302">309                 end                                                              .                 end                                                              <span>302</span></span>
<span class="nodiff" data-left-line="310" data-right-line="303">310             end                                                                  .             end                                                                  <span>303</span></span>
                                                                       <span class="diffskip">[11 unmodified lines hidden]</span>
<span class="nodiff" data-left-line="322" data-right-line="315">322     disp('Creating Video');                                                      .     disp('Creating Video');                                                      <span>315</span></span>
<span class="nodiff" data-left-line="323" data-right-line="316">323     load cmap                                                                    .     load cmap                                                                    <span>316</span></span>
<span class="nodiff" data-left-line="324" data-right-line="317">324     % setup a video file to populate                                             .     % setup a video file to populate                                             <span>317</span></span>
<span class="diffLine" data-left-line="325" data-right-line="318">325 <span class="diffnomatch">    filename = fullfile(newFolderLifetimeData, '<span style="background: #be96c6;">/</span>processed_video_modifiedcolors1 x     filename = fullfile(newFolderLifetimeData, '<span style="background: #be96c6;">\</span>processed_video_modifiedcolors1</span> <span>318</span></span>
<span class="nodiff" data-left-line="326" data-right-line="319">326     compressedVideo = VideoWriter(filename);                                     .     compressedVideo = VideoWriter(filename);                                     <span>319</span></span>
<span class="nodiff" data-left-line="327" data-right-line="320">327     %set the final video frame rate                                              .     %set the final video frame rate                                              <span>320</span></span>
<span class="nodiff" data-left-line="328" data-right-line="321">328     compressedVideo.FrameRate = frameRate;                                       .     compressedVideo.FrameRate = frameRate;                                       <span>321</span></span>
                                                                       <span class="diffskip">[62 unmodified lines hidden]</span>
<span class="nodiff" data-left-line="391" data-right-line="384">391 % lifetimeAlphaDatatoSave = cell2mat(lifetimeAlphaData);                         . % lifetimeAlphaDatatoSave = cell2mat(lifetimeAlphaData);                         <span>384</span></span>
<span class="nodiff" data-left-line="392" data-right-line="385">392 % lifetimeAlphaDatatoSave = permute(reshape(lifetimeAlphaData,[frame_size_x, num . % lifetimeAlphaDatatoSave = permute(reshape(lifetimeAlphaData,[frame_size_x, num <span>385</span></span>
<span class="nodiff" data-left-line="393" data-right-line="386">393 disp('Saving Datacubes');                                                        . disp('Saving Datacubes');                                                        <span>386</span></span>
<span class="diffLine" data-left-line="394" data-right-line="387">394 <span class="diffnomatch">save([newFolderLifetimeData,'<span style="background: #be96c6;">/</span>LifetimeImageData.mat'],'lifetimeImageData')       x save([newFolderLifetimeData,'<span style="background: #be96c6;">\</span>LifetimeImageData.mat'],'lifetimeImageData')      </span> <span>387</span></span>
<span class="diffLine" data-left-line="395" data-right-line="388">395 <span class="diffnomatch">save([newFolderLifetimeData,'<span style="background: #be96c6;">/</span>LifetimeAlphaData.mat'],'lifetimeAlphaData')       x save([newFolderLifetimeData,'<span style="background: #be96c6;">\</span>LifetimeAlphaData.mat'],'lifetimeAlphaData')      </span> <span>388</span></span>
<span class="nodiff" data-left-line="396" data-right-line="389">396                                                                                  .                                                                                  <span>389</span></span>
<span class="nodiff" data-left-line="397" data-right-line="390">397 %% create Meta Data File                                                         . %% create Meta Data File                                                         <span>390</span></span>
<span class="nodiff" data-left-line="398" data-right-line="391">398 xgalvo_step_size = 35;                                                           . xgalvo_step_size = 35;                                                           <span>391</span></span>
<span class="nodiff" data-left-line="399" data-right-line="392">399 firstWavelength = 0.5468*firstSensorPixel + 500;                                 . firstWavelength = 0.5468*firstSensorPixel + 500;                                 <span>392</span></span>
<span class="nodiff" data-left-line="400" data-right-line="393">400 lastWavelength = 0.5468*lastSensorPixel + 500;                                   . lastWavelength = 0.5468*lastSensorPixel + 500;                                   <span>393</span></span>
<span class="diffLine" data-left-line="401" data-right-line="394">401 <span class="diffnomatch">AnalysedfolderName = split(filePath,"<span style="background: #be96c6;">/</span>");                                        x AnalysedfolderName = split(filePath,"<span style="background: #be96c6;">\</span>");                                       </span> <span>394</span></span>
<span class="diffLine" data-left-line="402" data-right-line="395">402 <span class="diffnomatch">metaDataFolderName = strcat('<span style="background: #be96c6;">/</span>metaData_', string(AnalysedfolderName(2)), '.csv') x metaDataFolderName = strcat('<span style="background: #be96c6;">\</span>metaData_', string(AnalysedfolderName(2)), '.csv')</span> <span>395</span></span>
<span class="nodiff" data-left-line="403" data-right-line="396">403 metaData = {};                                                                   . metaData = {};                                                                   <span>396</span></span>
<span class="nodiff" data-left-line="404" data-right-line="397">404 metaData{1}  = ["Folder Analysed " ,  filePath];                                 . metaData{1}  = ["Folder Analysed " ,  filePath];                                 <span>397</span></span>
<span class="nodiff" data-left-line="405" data-right-line="398">405 metaData{2}  = ["Hist mode " ,  num2str(HIST_MODE)];                             . metaData{2}  = ["Hist mode " ,  num2str(HIST_MODE)];                             <span>398</span></span>
                                                                       <span class="diffskip">[22 unmodified lines hidden]</span>
<span class="nodiff" data-left-line="428" data-right-line="421">428 pause (1);                                                                       . pause (1);                                                                       <span>421</span></span>
<span class="nodiff" data-left-line="429" data-right-line="422">429 %clear all                                                                       . %clear all                                                                       <span>422</span></span>
<span class="nodiff" data-left-line="430" data-right-line="423">430                                                                                  .                                                                                  <span>423</span></span>
</pre></div></div><div id="bottom"><p>Number of unmodified lines: 344</p>
<p>Number of modified lines: 67</p>
<p>Number of inserted lines: 12</p>
<p>Number of deleted lines: 19</p>
</div></body></html>